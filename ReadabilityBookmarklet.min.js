/*eslint-env es6:false*/
function Readability(e,t,i){i=i||{},this._uri=e,this._doc=t,this._biggestFrame=!1,this._articleTitle=null,this._articleByline=null,this._articleDir=null,this._debug=!!i.debug,this._maxElemsToParse=i.maxElemsToParse||this.DEFAULT_MAX_ELEMS_TO_PARSE,this._nbTopCandidates=i.nbTopCandidates||this.DEFAULT_N_TOP_CANDIDATES,this._maxPages=i.maxPages||this.DEFAULT_MAX_PAGES,this._flags=this.FLAG_STRIP_UNLIKELYS|this.FLAG_WEIGHT_CLASSES|this.FLAG_CLEAN_CONDITIONALLY,this._parsedPages={},this._pageETags={},this._curPageNum=1
var n
this._debug?(n=function(e){var t=e.nodeName+" "
if(e.nodeType==e.TEXT_NODE)return t+'("'+e.textContent+'")'
var i=e.className&&"."+e.className.replace(/ /g,"."),n=""
return e.id?n="(#"+e.id+i+")":i&&(n="("+i+")"),t+n},this.log=function(){if("undefined"!=typeof dump){var e=Array.prototype.map.call(arguments,function(e){return e&&e.nodeName?n(e):e}).join(" ")
dump("Reader: (Readability) "+e+"\n")}else if("undefined"!=typeof console){var t=["Reader: (Readability) "].concat(arguments)
console.log.apply(console,t)}}):this.log=function(){}}function loadScript(e,t){var i=document.createElement("script")
i.type="text/javascript",i.readyState?i.onreadystatechange=function(){"loaded"!==i.readyState&&"complete"!==i.readyState||(i.onreadystatechange=null,t())}:i.onload=function(){t()},i.src=e,document.getElementsByTagName("head")[0].appendChild(i)}Readability.prototype={FLAG_STRIP_UNLIKELYS:1,FLAG_WEIGHT_CLASSES:2,FLAG_CLEAN_CONDITIONALLY:4,DEFAULT_MAX_ELEMS_TO_PARSE:0,DEFAULT_N_TOP_CANDIDATES:5,DEFAULT_MAX_PAGES:5,DEFAULT_TAGS_TO_SCORE:"section,h2,h3,h4,h5,h6,p,td,pre".toUpperCase().split(","),REGEXPS:{unlikelyCandidates:/banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|foot|header|legends|menu|modal|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|main|shadow/i,positive:/article|body|content|entry|hentry|h-entry|main|page|pagination|post|text|blog|story/i,negative:/hidden|^hid$| hid$| hid |^hid |banner|combx|comment|com-|contact|foot|footer|footnote|masthead|media|meta|modal|outbrain|promo|related|scroll|share|shoutbox|sidebar|skyscraper|sponsor|shopping|tags|tool|widget/i,extraneous:/print|archive|comment|discuss|e[\-]?mail|share|reply|all|login|sign|single|utility/i,byline:/byline|author|dateline|writtenby|p-author/i,replaceFonts:/<(\/?)font[^>]*>/gi,normalize:/\s{2,}/g,videos:/\/\/(www\.)?(dailymotion|youtube|youtube-nocookie|player\.vimeo)\.com/i,nextLink:/(next|weiter|continue|>([^\|]|$)|»([^\|]|$))/i,prevLink:/(prev|earl|old|new|<|«)/i,whitespace:/^\s*$/,hasContent:/\S$/},DIV_TO_P_ELEMS:["A","BLOCKQUOTE","DL","DIV","IMG","OL","P","PRE","TABLE","UL","SELECT"],ALTER_TO_DIV_EXCEPTIONS:["DIV","ARTICLE","SECTION","P"],_postProcessContent:function(e){this._fixRelativeUris(e)},_removeNodes:function(e,t){for(var i=e.length-1;i>=0;i--){var n=e[i],a=n.parentNode
a&&(t&&!t.call(this,n,i,e)||a.removeChild(n))}},_replaceNodeTags:function(e,t){for(var i=e.length-1;i>=0;i--){var n=e[i]
this._setNodeTag(n,t)}},_forEachNode:function(e,t){Array.prototype.forEach.call(e,t,this)},_someNode:function(e,t){return Array.prototype.some.call(e,t,this)},_concatNodeLists:function(){var e=Array.prototype.slice,t=e.call(arguments),i=t.map(function(t){return e.call(t)})
return Array.prototype.concat.apply([],i)},_getAllNodesWithTag:function(e,t){return e.querySelectorAll?e.querySelectorAll(t.join(",")):[].concat.apply([],t.map(function(t){var i=e.getElementsByTagName(t)
return Array.isArray(i)?i:Array.from(i)}))},_fixRelativeUris:function(e){function t(e){return/^[a-zA-Z][a-zA-Z0-9\+\-\.]*:/.test(e)?e:"//"==e.substr(0,2)?i+"://"+e.substr(2):"/"==e[0]?n+e:0===e.indexOf("./")?a+e.slice(2):"#"==e[0]?e:a+e}var i=this._uri.scheme,n=this._uri.prePath,a=this._uri.pathBase,r=e.getElementsByTagName("a")
this._forEachNode(r,function(e){var i=e.getAttribute("href")
if(i)if(0===i.indexOf("javascript:")){var n=this._doc.createTextNode(e.textContent)
e.parentNode.replaceChild(n,e)}else e.setAttribute("href",t(i))})
var s=e.getElementsByTagName("img")
this._forEachNode(s,function(e){var i=e.getAttribute("src")
i&&e.setAttribute("src",t(i))})},_getArticleTitle:function(){function e(e){return e.split(/\s+/).length}var t=this._doc,i="",n=""
try{i=n=t.title,"string"!=typeof i&&(i=n=this._getInnerText(t.getElementsByTagName("title")[0]))}catch(e){}var a=!1
if(/ [\|\-\\\/>»] /.test(i))a=/ [\\\/>»] /.test(i),i=n.replace(/(.*)[\|\-\\\/>»] .*/gi,"$1"),e(i)<3&&(i=n.replace(/[^\|\-\\\/>»]*[\|\-\\\/>»](.*)/gi,"$1"))
else if(-1!==i.indexOf(": ")){var r=this._concatNodeLists(t.getElementsByTagName("h1"),t.getElementsByTagName("h2")),s=this._someNode(r,function(e){return e.textContent===i})
s||(i=n.substring(n.lastIndexOf(":")+1),e(i)<3&&(i=n.substring(n.indexOf(":")+1)))}else if(i.length>150||i.length<15){var o=t.getElementsByTagName("h1")
1===o.length&&(i=this._getInnerText(o[0]))}i=i.trim()
var l=e(i)
return l<=4&&(!a||l!=e(n.replace(/[\|\-\\\/>»]+/g,""))-1)&&(i=n),i},_prepDocument:function(){var e=this._doc
this._removeNodes(e.getElementsByTagName("style")),e.body&&this._replaceBrs(e.body),this._replaceNodeTags(e.getElementsByTagName("font"),"SPAN")},_nextElement:function(e){for(var t=e;t&&t.nodeType!=Node.ELEMENT_NODE&&this.REGEXPS.whitespace.test(t.textContent);)t=t.nextSibling
return t},_replaceBrs:function(e){this._forEachNode(this._getAllNodesWithTag(e,["br"]),function(e){for(var t=e.nextSibling,i=!1;(t=this._nextElement(t))&&"BR"==t.tagName;){i=!0
var n=t.nextSibling
t.parentNode.removeChild(t),t=n}if(i){var a=this._doc.createElement("p")
for(e.parentNode.replaceChild(a,e),t=a.nextSibling;t;){if("BR"==t.tagName){var r=this._nextElement(t)
if(r&&"BR"==r.tagName)break}var s=t.nextSibling
a.appendChild(t),t=s}}})},_setNodeTag:function(e,t){if(this.log("_setNodeTag",e,t),e.__JSDOMParser__)return e.localName=t.toLowerCase(),e.tagName=t.toUpperCase(),e
for(var i=e.ownerDocument.createElement(t);e.firstChild;)i.appendChild(e.firstChild)
e.parentNode.replaceChild(i,e),e.readability&&(i.readability=e.readability)
for(var n=0;n<e.attributes.length;n++)i.setAttribute(e.attributes[n].name,e.attributes[n].value)
return i},_prepArticle:function(e){this._cleanStyles(e),this._markDataTables(e),this._cleanConditionally(e,"form"),this._cleanConditionally(e,"fieldset"),this._clean(e,"object"),this._clean(e,"embed"),this._clean(e,"h1"),this._clean(e,"footer"),this._forEachNode(e.children,function(e){this._cleanMatchedNodes(e,/share/)})
var t=e.getElementsByTagName("h2")
if(1===t.length){var i=(t[0].textContent.length-this._articleTitle.length)/this._articleTitle.length
Math.abs(i)<.5&&(i>0?t[0].textContent.includes(this._articleTitle):this._articleTitle.includes(t[0].textContent))&&this._clean(e,"h2")}this._clean(e,"iframe"),this._clean(e,"input"),this._clean(e,"textarea"),this._clean(e,"select"),this._clean(e,"button"),this._cleanHeaders(e),this._cleanConditionally(e,"table"),this._cleanConditionally(e,"ul"),this._cleanConditionally(e,"div"),this._removeNodes(e.getElementsByTagName("p"),function(e){return 0===e.getElementsByTagName("img").length+e.getElementsByTagName("embed").length+e.getElementsByTagName("object").length+e.getElementsByTagName("iframe").length&&!this._getInnerText(e,!1)}),this._forEachNode(this._getAllNodesWithTag(e,["br"]),function(e){var t=this._nextElement(e.nextSibling)
t&&"P"==t.tagName&&e.parentNode.removeChild(e)})},_initializeNode:function(e){switch(e.readability={contentScore:0},e.tagName){case"DIV":e.readability.contentScore+=5
break
case"PRE":case"TD":case"BLOCKQUOTE":e.readability.contentScore+=3
break
case"ADDRESS":case"OL":case"UL":case"DL":case"DD":case"DT":case"LI":case"FORM":e.readability.contentScore-=3
break
case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"TH":e.readability.contentScore-=5}e.readability.contentScore+=this._getClassWeight(e)},_removeAndGetNext:function(e){var t=this._getNextNode(e,!0)
return e.parentNode.removeChild(e),t},_getNextNode:function(e,t){if(!t&&e.firstElementChild)return e.firstElementChild
if(e.nextElementSibling)return e.nextElementSibling
do{e=e.parentNode}while(e&&!e.nextElementSibling)
return e&&e.nextElementSibling},_getNextNodeNoElementProperties:function(e,t){function i(e){do{e=e.nextSibling}while(e&&e.nodeType!==e.ELEMENT_NODE)
return e}if(!t&&e.children[0])return e.children[0]
var n=i(e)
if(n)return n
do{(e=e.parentNode)&&(n=i(e))}while(e&&!n)
return e&&n},_checkByline:function(e,t){if(this._articleByline)return!1
if(void 0!==e.getAttribute)var i=e.getAttribute("rel")
return!("author"!==i&&!this.REGEXPS.byline.test(t)||!this._isValidByline(e.textContent))&&(this._articleByline=e.textContent.trim(),!0)},_getNodeAncestors:function(e,t){t=t||0
for(var i=0,n=[];e.parentNode&&(n.push(e.parentNode),!t||++i!==t);)e=e.parentNode
return n},_grabArticle:function(e){this.log("**** grabArticle ****")
var t=this._doc,i=null!==e
if(!(e=e||this._doc.body))return this.log("No body found in document. Abort."),null
for(var n=e.innerHTML;;){for(var a=this._flagIsActive(this.FLAG_STRIP_UNLIKELYS),r=[],s=this._doc.documentElement;s;){var o=s.className+" "+s.id
if(this._checkByline(s,o))s=this._removeAndGetNext(s)
else if(a&&this.REGEXPS.unlikelyCandidates.test(o)&&!this.REGEXPS.okMaybeItsACandidate.test(o)&&"BODY"!==s.tagName&&"A"!==s.tagName)this.log("Removing unlikely candidate - "+o),s=this._removeAndGetNext(s)
else if("DIV"!==s.tagName&&"SECTION"!==s.tagName&&"HEADER"!==s.tagName&&"H1"!==s.tagName&&"H2"!==s.tagName&&"H3"!==s.tagName&&"H4"!==s.tagName&&"H5"!==s.tagName&&"H6"!==s.tagName||!this._isElementWithoutContent(s)){if(-1!==this.DEFAULT_TAGS_TO_SCORE.indexOf(s.tagName)&&r.push(s),"DIV"===s.tagName)if(this._hasSinglePInsideElement(s)){var l=s.children[0]
s.parentNode.replaceChild(l,s),s=l}else this._hasChildBlockElement(s)?this._forEachNode(s.childNodes,function(e){if(e.nodeType===Node.TEXT_NODE&&e.textContent.trim().length>0){var i=t.createElement("p")
i.textContent=e.textContent,i.style.display="inline",i.className="readability-styled",s.replaceChild(i,e)}}):(s=this._setNodeTag(s,"P"),r.push(s))
s=this._getNextNode(s)}else s=this._removeAndGetNext(s)}var c=[]
this._forEachNode(r,function(e){if(e.parentNode&&void 0!==e.parentNode.tagName){var t=this._getInnerText(e)
if(!(t.length<25)){var i=this._getNodeAncestors(e,3)
if(0!==i.length){var n=0
n+=1,n+=t.split(",").length,n+=Math.min(Math.floor(t.length/100),3),this._forEachNode(i,function(e,t){if(e.tagName){if(void 0===e.readability&&(this._initializeNode(e),c.push(e)),0===t)var i=1
else i=1===t?2:3*t
e.readability.contentScore+=n/i}})}}}})
for(var h=[],d=0,g=c.length;d<g;d+=1){var u=c[d],p=u.readability.contentScore*(1-this._getLinkDensity(u))
u.readability.contentScore=p,this.log("Candidate:",u,"with score "+p)
for(var m=0;m<this._nbTopCandidates;m++){var f=h[m]
if(!f||p>f.readability.contentScore){h.splice(m,0,u),h.length>this._nbTopCandidates&&h.pop()
break}}}var _,N=h[0]||null,y=!1
if(null===N||"BODY"===N.tagName){N=t.createElement("DIV"),y=!0
for(var E=e.childNodes;E.length;)this.log("Moving child out:",E[0]),N.appendChild(E[0])
e.appendChild(N),this._initializeNode(N)}else if(N){for(var v=[],b=1;b<h.length;b++)h[b].readability.contentScore/N.readability.contentScore>=.75&&v.push(this._getNodeAncestors(h[b]))
if(v.length>=3)for(_=N.parentNode;"BODY"!==_.tagName;){for(var T=0,A=0;A<v.length&&T<3;A++)T+=Number(v[A].includes(_))
if(T>=3){N=_
break}_=_.parentNode}N.readability||this._initializeNode(N),_=N.parentNode
for(var x=N.readability.contentScore,S=x/3;"BODY"!==_.tagName;)if(_.readability){var C=_.readability.contentScore
if(C<S)break
if(C>x){N=_
break}x=_.readability.contentScore,_=_.parentNode}else _=_.parentNode
for(_=N.parentNode;"BODY"!=_.tagName&&1==_.children.length;)N=_,_=N.parentNode
N.readability||this._initializeNode(N)}var L=t.createElement("DIV")
i&&(L.id="readability-content")
var P=Math.max(10,.2*N.readability.contentScore)
_=N.parentNode
for(var I=_.children,D=0,B=I.length;D<B;D++){var w=I[D],R=!1
if(this.log("Looking at sibling node:",w,w.readability?"with score "+w.readability.contentScore:""),this.log("Sibling has score",w.readability?w.readability.contentScore:"Unknown"),w===N)R=!0
else{var O=0
if(w.className===N.className&&""!==N.className&&(O+=.2*N.readability.contentScore),w.readability&&w.readability.contentScore+O>=P)R=!0
else if("P"===w.nodeName){var G=this._getLinkDensity(w),M=this._getInnerText(w),k=M.length
k>80&&G<.25?R=!0:k<80&&k>0&&0===G&&-1!==M.search(/\.( |$)/)&&(R=!0)}}R&&(this.log("Appending node:",w),-1===this.ALTER_TO_DIV_EXCEPTIONS.indexOf(w.nodeName)&&(this.log("Altering sibling:",w,"to div."),w=this._setNodeTag(w,"DIV")),L.appendChild(w),D-=1,B-=1)}if(this._debug&&this.log("Article content pre-prep: "+L.innerHTML),this._prepArticle(L),this._debug&&this.log("Article content post-prep: "+L.innerHTML),1===this._curPageNum)if(y)N.id="readability-page-1",N.className="page"
else{var H=t.createElement("DIV")
H.id="readability-page-1",H.className="page"
for(var X=L.childNodes;X.length;)H.appendChild(X[0])
L.appendChild(H)}if(this._debug&&this.log("Article content after paging: "+L.innerHTML),!(this._getInnerText(L,!0).length<500)){var F=[_,N].concat(this._getNodeAncestors(_))
return this._someNode(F,function(e){if(!e.tagName)return!1
var t=e.getAttribute("dir")
return!!t&&(this._articleDir=t,!0)}),L}if(e.innerHTML=n,this._flagIsActive(this.FLAG_STRIP_UNLIKELYS))this._removeFlag(this.FLAG_STRIP_UNLIKELYS)
else if(this._flagIsActive(this.FLAG_WEIGHT_CLASSES))this._removeFlag(this.FLAG_WEIGHT_CLASSES)
else{if(!this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY))return null
this._removeFlag(this.FLAG_CLEAN_CONDITIONALLY)}}},_isValidByline:function(e){return("string"==typeof e||e instanceof String)&&(e=e.trim(),e.length>0&&e.length<100)},_getArticleMetadata:function(){var e={},t={},i=this._doc.getElementsByTagName("meta"),n=/^\s*((twitter)\s*:\s*)?(description|title)\s*$/gi,a=/^\s*og\s*:\s*(description|title)\s*$/gi
return this._forEachNode(i,function(i){var r=i.getAttribute("name"),s=i.getAttribute("property")
if(-1!==[r,s].indexOf("author"))return void(e.byline=i.getAttribute("content"))
var o=null
if(n.test(r)?o=r:a.test(s)&&(o=s),o){var l=i.getAttribute("content")
l&&(o=o.toLowerCase().replace(/\s/g,""),t[o]=l.trim())}}),"description"in t?e.excerpt=t.description:"og:description"in t?e.excerpt=t["og:description"]:"twitter:description"in t&&(e.excerpt=t["twitter:description"]),e.title=this._getArticleTitle(),e.title||("og:title"in t?e.title=t["og:title"]:"twitter:title"in t&&(e.title=t["twitter:title"])),e},_removeScripts:function(e){this._removeNodes(e.getElementsByTagName("script"),function(e){return e.nodeValue="",e.removeAttribute("src"),!0}),this._removeNodes(e.getElementsByTagName("noscript"))},_hasSinglePInsideElement:function(e){return 1==e.children.length&&"P"===e.children[0].tagName&&!this._someNode(e.childNodes,function(e){return e.nodeType===Node.TEXT_NODE&&this.REGEXPS.hasContent.test(e.textContent)})},_isElementWithoutContent:function(e){return e.nodeType===Node.ELEMENT_NODE&&0==e.textContent.trim().length&&(0==e.children.length||e.children.length==e.getElementsByTagName("br").length+e.getElementsByTagName("hr").length)},_hasChildBlockElement:function(e){return this._someNode(e.childNodes,function(e){return-1!==this.DIV_TO_P_ELEMS.indexOf(e.tagName)||this._hasChildBlockElement(e)})},_getInnerText:function(e,t){t=void 0===t||t
var i=e.textContent.trim()
return t?i.replace(this.REGEXPS.normalize," "):i},_getCharCount:function(e,t){return t=t||",",this._getInnerText(e).split(t).length-1},_cleanStyles:function(e){if(e=e||this._doc){var t=e.firstChild
for("function"==typeof e.removeAttribute&&"readability-styled"!==e.className&&e.removeAttribute("style");null!==t;)t.nodeType===t.ELEMENT_NODE&&("readability-styled"!==t.className&&t.removeAttribute("style"),this._cleanStyles(t)),t=t.nextSibling}},_getLinkDensity:function(e){var t=this._getInnerText(e).length
if(0===t)return 0
var i=0
return this._forEachNode(e.getElementsByTagName("a"),function(e){i+=this._getInnerText(e).length}),i/t},_findBaseUrl:function(){for(var e=this._uri,t=e.path.split("?")[0],i=t.split("/").reverse(),n=[],a="",r=0,s=i.length;r<s;r+=1){var o=i[r];-1!==o.indexOf(".")&&(a=o.split(".")[1],a.match(/[^a-zA-Z]/)||(o=o.split(".")[0])),!o.match(/((_|-)?p[a-z]*|(_|-))[0-9]{1,2}$/i)||1!==r&&0!==r||(o=o.replace(/((_|-)?p[a-z]*|(_|-))[0-9]{1,2}$/i,""))
var l=!1
r<2&&o.match(/^\d{1,2}$/)&&(l=!0),0===r&&"index"===o.toLowerCase()&&(l=!0),r<2&&o.length<3&&!i[0].match(/[a-z]/i)&&(l=!0),l||n.push(o)}return e.scheme+"://"+e.host+n.reverse().join("/")},_findNextPageLink:function(e){for(var t=this._uri,i={},n=e.getElementsByTagName("a"),a=this._findBaseUrl(),r=0,s=n.length;r<s;r+=1){var o=n[r],l=n[r].href.replace(/#.*$/,"").replace(/\/$/,"")
if(!(""===l||l===a||l===t.spec||l in this._parsedPages)&&t.host===l.split(/\/+/g)[1]){var c=this._getInnerText(o)
if(!(c.match(this.REGEXPS.extraneous)||c.length>25)){if(l.replace(a,"").match(/\d/)){l in i?i[l].linkText+=" | "+c:i[l]={score:0,linkText:c,href:l}
var h=i[l]
0!==l.indexOf(a)&&(h.score-=25)
var d=c+" "+o.className+" "+o.id
d.match(this.REGEXPS.nextLink)&&(h.score+=50),d.match(/pag(e|ing|inat)/i)&&(h.score+=25),d.match(/(first|last)/i)&&(h.linkText.match(this.REGEXPS.nextLink)||(h.score-=65)),(d.match(this.REGEXPS.negative)||d.match(this.REGEXPS.extraneous))&&(h.score-=50),d.match(this.REGEXPS.prevLink)&&(h.score-=200)
for(var g=o.parentNode,u=!1,p=!1;g;){var m=g.className+" "+g.id
!u&&m&&m.match(/pag(e|ing|inat)/i)&&(u=!0,h.score+=25),!p&&m&&m.match(this.REGEXPS.negative)&&(m.match(this.REGEXPS.positive)||(h.score-=25,p=!0)),g=g.parentNode}(l.match(/p(a|g|ag)?(e|ing|ination)?(=|\/)[0-9]{1,2}/i)||l.match(/(page|paging)/i))&&(h.score+=25),l.match(this.REGEXPS.extraneous)&&(h.score-=15)
var f=parseInt(c,10)
f&&(1===f?h.score-=10:h.score+=Math.max(0,10-f))}}}}var _=null
for(var N in i)i.hasOwnProperty(N)&&i[N].score>=50&&(!_||_.score<i[N].score)&&(_=i[N])
var y=null
return _&&(y=_.href.replace(/\/$/,""),this.log("NEXT PAGE IS "+y),this._parsedPages[y]=!0),y},_successfulRequest:function(e){return e.status>=200&&e.status<300||304===e.status||0===e.status&&e.responseText},_ajax:function(e,t){function i(e){4===n.readyState&&(this._successfulRequest(n)?t.success&&t.success(n):t.error&&t.error(n))}var n=new XMLHttpRequest
void 0===t&&(t={}),n.onreadystatechange=i,n.open("get",e,!0),n.setRequestHeader("Accept","text/html")
try{n.send(t.postBody)}catch(e){t.error&&t.error()}return n},_appendNextPage:function(e){var t=this._doc
this._curPageNum+=1
var i=t.createElement("DIV")
if(i.id="readability-page-"+this._curPageNum,i.className="page",i.innerHTML='<p class="page-separator" title="Page '+this._curPageNum+'">&sect;</p>',t.getElementById("readability-content").appendChild(i),this._curPageNum>this._maxPages){var n="<div style='text-align: center'><a href='"+e+"'>View Next Page</a></div>"
return void(i.innerHTML=i.innerHTML+n)}(function(e,n){this._ajax(e,{success:function(a){var r=a.getResponseHeader("ETag")
if(r){if(r in this._pageETags)return this.log("Exact duplicate page found via ETag. Aborting."),void(i.style.display="none")
this._pageETags[r]=1}var s=t.createElement("DIV"),o=a.responseText.replace(/\n/g,"￿").replace(/<script.*?>.*?<\/script>/gi,"")
o=o.replace(/\n/g,"￿").replace(/<script.*?>.*?<\/script>/gi,""),o=o.replace(/\uffff/g,"\n").replace(/<(\/?)noscript/gi,"<$1div"),o=o.replace(this.REGEXPS.replaceFonts,"<$1span>"),s.innerHTML=o,this._replaceBrs(s),this._flags=7
var l=this._findNextPageLink(s),c=this._grabArticle(s)
if(!c)return void this.log("No content found in page to append. Aborting.")
var h=c.getElementsByTagName("P").length?c.getElementsByTagName("P")[0]:null
if(h&&h.innerHTML.length>100)for(var d=1;d<=this._curPageNum;d+=1){var g=t.getElementById("readability-page-"+d)
if(g&&-1!==g.innerHTML.indexOf(h.innerHTML))return this.log("Duplicate of page "+d+" - skipping."),i.style.display="none",void(this._parsedPages[e]=!0)}this._removeScripts(c),n.innerHTML=n.innerHTML+c.innerHTML,setTimeout(function(){this._postProcessContent(n)}.bind(this),500),l&&this._appendNextPage(l)}})}).bind(this)(e,i)},_getClassWeight:function(e){if(!this._flagIsActive(this.FLAG_WEIGHT_CLASSES))return 0
var t=0
return"string"==typeof e.className&&""!==e.className&&(this.REGEXPS.negative.test(e.className)&&(t-=25),this.REGEXPS.positive.test(e.className)&&(t+=25)),"string"==typeof e.id&&""!==e.id&&(this.REGEXPS.negative.test(e.id)&&(t-=25),this.REGEXPS.positive.test(e.id)&&(t+=25)),t},_clean:function(e,t){var i=-1!==["object","embed","iframe"].indexOf(t)
this._removeNodes(e.getElementsByTagName(t),function(e){if(i){var t=[].map.call(e.attributes,function(e){return e.value}).join("|")
if(this.REGEXPS.videos.test(t))return!1
if(this.REGEXPS.videos.test(e.innerHTML))return!1}return!0})},_hasAncestorTag:function(e,t,i,n){i=i||3,t=t.toUpperCase()
for(var a=0;e.parentNode;){if(i>0&&a>i)return!1
if(e.parentNode.tagName===t&&(!n||n(e.parentNode)))return!0
e=e.parentNode,a++}return!1},_getRowAndColumnCount:function(e){for(var t=0,i=0,n=e.getElementsByTagName("tr"),a=0;a<n.length;a++){var r=n[a].getAttribute("rowspan")||0
r&&(r=parseInt(r,10)),t+=r||1
for(var s=0,o=n[a].getElementsByTagName("td"),l=0;l<o.length;l++){var c=o[l].getAttribute("colspan")||0
c&&(c=parseInt(c,10)),s+=c||1}i=Math.max(i,s)}return{rows:t,columns:i}},_markDataTables:function(e){for(var t=e.getElementsByTagName("table"),i=0;i<t.length;i++){var n=t[i]
if("presentation"!=n.getAttribute("role")){if("0"!=n.getAttribute("datatable")){if(n.getAttribute("summary"))n._readabilityDataTable=!0
else{var a=n.getElementsByTagName("caption")[0]
if(a&&a.childNodes.length>0)n._readabilityDataTable=!0
else{var r=["col","colgroup","tfoot","thead","th"],s=function(e){return!!n.getElementsByTagName(e)[0]}
if(r.some(s))this.log("Data table because found data-y descendant"),n._readabilityDataTable=!0
else if(n.getElementsByTagName("table")[0])n._readabilityDataTable=!1
else{var o=this._getRowAndColumnCount(n)
o.rows>=10||o.columns>4?n._readabilityDataTable=!0:n._readabilityDataTable=o.rows*o.columns>10}}}}else n._readabilityDataTable=!1}else n._readabilityDataTable=!1}},_cleanConditionally:function(e,t){if(this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY)){var i="ul"===t||"ol"===t
this._removeNodes(e.getElementsByTagName(t),function(e){var t=function(e){return e._readabilityDataTable}
if(this._hasAncestorTag(e,"table",-1,t))return!1
var n=this._getClassWeight(e)
if(this.log("Cleaning Conditionally",e),n+0<0)return!0
if(this._getCharCount(e,",")<10){for(var a=e.getElementsByTagName("p").length,r=e.getElementsByTagName("img").length,s=e.getElementsByTagName("li").length-100,o=e.getElementsByTagName("input").length,l=0,c=e.getElementsByTagName("embed"),h=0,d=c.length;h<d;h+=1)this.REGEXPS.videos.test(c[h].src)||(l+=1)
var g=this._getLinkDensity(e),u=this._getInnerText(e).length
return r>1&&a/r<.5&&!this._hasAncestorTag(e,"figure")||!i&&s>a||o>Math.floor(a/3)||!i&&u<25&&(0===r||r>2)&&!this._hasAncestorTag(e,"figure")||!i&&n<25&&g>.2||n>=25&&g>.5||1===l&&u<75||l>1}return!1})}},_cleanMatchedNodes:function(e,t){for(var i=this._getNextNode(e,!0),n=this._getNextNode(e);n&&n!=i;)n=t.test(n.className+" "+n.id)?this._removeAndGetNext(n):this._getNextNode(n)},_cleanHeaders:function(e){for(var t=1;t<3;t+=1)this._removeNodes(e.getElementsByTagName("h"+t),function(e){return this._getClassWeight(e)<0})},_flagIsActive:function(e){return(this._flags&e)>0},_addFlag:function(e){this._flags=this._flags|e},_removeFlag:function(e){this._flags=this._flags&~e},isProbablyReaderable:function(e){var t=this._getAllNodesWithTag(this._doc,["p","pre"]),i=this._getAllNodesWithTag(this._doc,["div > br"])
if(i.length){var n=new Set;[].forEach.call(i,function(e){n.add(e.parentNode)}),t=[].concat.apply(Array.from(n),t)}var a=0
return this._someNode(t,function(t){if(e&&!e(t))return!1
var i=t.className+" "+t.id
if(this.REGEXPS.unlikelyCandidates.test(i)&&!this.REGEXPS.okMaybeItsACandidate.test(i))return!1
if(t.matches&&t.matches("li p"))return!1
var n=t.textContent.trim().length
return!(n<140)&&(a+=Math.sqrt(n-140))>20})},parse:function(){if(this._maxElemsToParse>0){var e=this._doc.getElementsByTagName("*").length
if(e>this._maxElemsToParse)throw new Error("Aborting parsing document; "+e+" elements found")}void 0===this._doc.documentElement.firstElementChild&&(this._getNextNode=this._getNextNodeNoElementProperties),this._removeScripts(this._doc),this._prepDocument()
var t=this._getArticleMetadata()
this._articleTitle=t.title
var i=this._grabArticle()
if(!i)return null
if(this.log("Grabbed: "+i.innerHTML),this._postProcessContent(i),!t.excerpt){var n=i.getElementsByTagName("p")
n.length>0&&(t.excerpt=n[0].textContent.trim())}var a=i.textContent
return{uri:this._uri,title:this._articleTitle,byline:t.byline||this._articleByline,dir:this._articleDir,content:i.innerHTML,textContent:a,length:a.length,excerpt:t.excerpt}}},"object"==typeof module&&(module.exports=Readability),window.injectScript=function(e){var t=document.createElement("script")
return t.type="text/javascript",t.src=e,document.getElementsByTagName("head")[0].appendChild(t),!0},window.injectJQ=function(){"undefined"==typeof jQuery&&window.injectJQ("https://code.jquery.com/jquery-2.1.0.min.js")},window.injectJQ()
var loc=document.location,uri={spec:loc.href,host:loc.host,prePath:loc.protocol+"//"+loc.host,scheme:loc.protocol.substr(0,loc.protocol.indexOf(":")),pathBase:loc.protocol+"//"+loc.host+loc.pathname.substr(0,loc.pathname.lastIndexOf("/")+1)},article=new Readability(uri,document).parse()
content=article.content.replace(/<p[^>]*>/g,"").replace(/<\/p>/g,"\n"),document.head.innerHTML='<meta name="viewport" content="width=device-width" />'
var style=document.createElement("style")
style.type="text/css",style.appendChild(document.createTextNode("div#pages{white-space: pre-wrap;} body{ margin:0px; } div.page {padding:8px;} #pages .turn-page{ color:#fff; background-color:#383838; background-size:100% 100%; }")),document.getElementsByTagName("head")[0].appendChild(style)
var readyFlag=!1,initTurnJS=function(e){var t=e(window).height()
e(window).width()
e("#pages").turn({display:"single",acceleration:!0,gradients:!0,duration:0,height:t,width:"100%",when:{turned:function(e,t){}}}),readyFlag=!0}
window.injectScript("https://code.jquery.com/jquery-2.1.0.min.js"),loadScript("https://cdn.rawgit.com/blisszard/turn.js/08c1f659/turn.min.js",function(){jQuery(function(e){e(window).ready(function(){initTurnJS(e)}),e("#pages").on("touchend click",function(t){var i=e(window).width(),n=t.pageX
if(void 0===n){if(void 0===t.originalEvent||void 0===t.originalEvent.touches[0])return
n=t.originalEvent.touches[0].pageX,t.stopPropagation(),t.preventDefault()}n<=i/2?e("#pages").turn("previous"):e("#pages").turn("next")}),e(window).bind("keydown",function(t){37==t.keyCode?e("#pages").turn("previous"):39==t.keyCode&&e("#pages").turn("next")})})}),document.body.innerHTML='<div id="pages">'+jQuery(content).text()+"</div>"
var paginator=function(){jQuery(function(e){var t=e("div#pages"),i=t.text().split(" ")
!function(){var n=e('<div class="page" />')
t.empty().append(n)
for(var a=null,r=0;r<i.length;r++){var s
s=a?a+" "+i[r]:i[r],n.text(s),n.height()>e(window).height()?(n.text(a),n.clone().insertBefore(n),a=null):a=s}}()})}
paginator()
